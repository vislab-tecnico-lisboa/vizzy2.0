<!--
  * Main changes from ROS1 to ROS2:
  *  - 'arg' tags in substitutions are replaced with 'var' tags (not in declarations).
-->

<launch>
  <arg name="ns" default="" description="Namespace for all nodes"/>
  <let name="front_laser_frame" default="$nav_hokuyo_laser_link" description="Frame id for front laser link."/>
  <let name="rear_laser_frame" default="$nav_hokuyo_rear_laser_link" description="Frame id for rear laser link."/>
  
  <include file="$(find-pkg-share vizzy_robot)/launch/auxiliary_vizzy_launch.py">
        <arg name="use_full_gazebo_model" value="false" />
        <arg name="use_full_hand_model" value="false" />
        <arg name="urdf_file" value="vizzy.urdf.xacro" />
        <arg name="use_yarp" value="false" />
        <arg name="disable_laser" value="false" />
        <arg name="disable_3d_sensor" value="false" />
  </include>

  <include file="$(find-pkg-share vizzy_robot)/launch/segway_base_launch.xml">
      </include>
  
  <group>
      <node name="nav_hokuyo_node" pkg="urg_node" exec="urg_node_driver" output="screen">
          <param name="serial_port" value="/dev/ttyACM1" />
          <param name="frame_id" value="$(var front_laser_frame)" />
          <param name="angle_min" value="-1.309" />
          <param name="angle_max" value="1.309" />
          <remap from="scan" to="scan" />
      </node>
  </group>

  <group>
      <node name="nav_hokuyo_rear_node" pkg="urg_node" exec="urg_node_driver" output="screen">
          <param name="serial_port" value="/dev/ttyACM0" />
          <param name="frame_id" value="$(var rear_laser_frame)" />
          <param name="angle_min" value="-1.309" />
          <param name="angle_max" value="1.309" />
          <remap from="scan" to="scan_rear" />
      </node>
  </group>

</launch>